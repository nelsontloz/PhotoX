http:
  routers:
    web:
      entryPoints:
        - web
      rule: Host(`localhost`)
      service: web-app

    auth:
      entryPoints:
        - web
      rule: Host(`localhost`) && (PathPrefix(`/api/v1/auth`) || PathPrefix(`/api/v1/me`))
      service: auth-service

    ingest:
      entryPoints:
        - web
      rule: Host(`localhost`) && PathPrefix(`/api/v1/uploads`)
      service: ingest-service

    library:
      entryPoints:
        - web
      rule: Host(`localhost`) && (PathPrefix(`/api/v1/library`) || PathPrefix(`/api/v1/media`))
      service: library-service

    album:
      entryPoints:
        - web
      rule: Host(`localhost`) && (PathPrefix(`/api/v1/albums`) || PathPrefix(`/api/v1/shares`))
      service: album-sharing-service

    search:
      entryPoints:
        - web
      rule: Host(`localhost`) && PathPrefix(`/api/v1/search`)
      service: search-service

    worker:
      entryPoints:
        - web
      rule: Host(`localhost`) && PathPrefix(`/api/v1/worker`)
      service: worker-service

    ml:
      entryPoints:
        - web
      rule: Host(`localhost`) && PathPrefix(`/api/v1/ml`)
      service: ml-service

  services:
    web-app:
      loadBalancer:
        servers:
          - url: http://web-app:3000

    auth-service:
      loadBalancer:
        servers:
          - url: http://auth-service:3000

    ingest-service:
      loadBalancer:
        servers:
          - url: http://ingest-service:3000

    library-service:
      loadBalancer:
        servers:
          - url: http://library-service:3000

    album-sharing-service:
      loadBalancer:
        servers:
          - url: http://album-sharing-service:3000

    search-service:
      loadBalancer:
        servers:
          - url: http://search-service:3000

    worker-service:
      loadBalancer:
        servers:
          - url: http://worker-service:3000

    ml-service:
      loadBalancer:
        servers:
          - url: http://ml-service:8000

{
  "consumer": {
    "name": "photox-web-app"
  },
  "interactions": [
    {
      "description": "a request to initialize a multi-part upload",
      "providerStates": [
        {
          "name": "a user is ready to upload a new 3.8MB JPEG file"
        }
      ],
      "request": {
        "body": {
          "checksumSha256": "de4ecf4e0d0f157c8142fdb7f0e6f9f607c37d9b233830f70f7f83b4f04f9b69",
          "contentType": "image/jpeg",
          "fileName": "IMG_1024.jpg",
          "fileSize": 3811212
        },
        "headers": {
          "Authorization": "Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ0eXBlIjoiYWNjZXNzIiwiZW1haWwiOiJuZXctdXNlckBleGFtcGxlLmNvbSIsImV4cCI6NDEwMjQ0NDgwMCwic3ViIjoiMTExMTExMTEtMTExMS00MTExLTgxMTEtMTExMTExMTExMTExIn0.JhjfkCBLBPGeCG7E6KkBWmPSY8bO2st5TX-VrTHSumM",
          "Content-Type": "application/json",
          "Idempotency-Key": "init-abc123"
        },
        "method": "POST",
        "path": "/api/v1/uploads/init"
      },
      "response": {
        "body": {
          "expiresAt": "2026-02-18T12:00:00.000Z",
          "partSize": 5242880,
          "uploadId": "44444444-4444-4444-8444-444444444444"
        },
        "headers": {
          "Content-Type": "application/json; charset=utf-8"
        },
        "matchingRules": {
          "body": {
            "$.expiresAt": {
              "combine": "AND",
              "matchers": [
                {
                  "match": "regex",
                  "regex": "^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(?:\\.\\d{3})?Z$"
                }
              ]
            },
            "$.partSize": {
              "combine": "AND",
              "matchers": [
                {
                  "match": "type"
                }
              ]
            },
            "$.uploadId": {
              "combine": "AND",
              "matchers": [
                {
                  "match": "regex",
                  "regex": "^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$"
                }
              ]
            }
          }
        },
        "status": 201
      }
    },
    {
      "description": "a request to upload the first part of the file",
      "providerStates": [
        {
          "name": "an active upload session '44444444-4444-4444-8444-444444444444' exists"
        }
      ],
      "request": {
        "body": "chunk-data",
        "headers": {
          "Authorization": "Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ0eXBlIjoiYWNjZXNzIiwiZW1haWwiOiJuZXctdXNlckBleGFtcGxlLmNvbSIsImV4cCI6NDEwMjQ0NDgwMCwic3ViIjoiMTExMTExMTEtMTExMS00MTExLTgxMTEtMTExMTExMTExMTExIn0.JhjfkCBLBPGeCG7E6KkBWmPSY8bO2st5TX-VrTHSumM",
          "Content-Type": "application/octet-stream"
        },
        "method": "POST",
        "path": "/api/v1/uploads/44444444-4444-4444-8444-444444444444/part",
        "query": {
          "partNumber": [
            "1"
          ]
        }
      },
      "response": {
        "body": {
          "bytesStored": 10,
          "checksumSha256": "de4ecf4e0d0f157c8142fdb7f0e6f9f607c37d9b233830f70f7f83b4f04f9b69",
          "partNumber": 1,
          "uploadId": "44444444-4444-4444-8444-444444444444"
        },
        "headers": {
          "Content-Type": "application/json; charset=utf-8"
        },
        "matchingRules": {
          "body": {
            "$.bytesStored": {
              "combine": "AND",
              "matchers": [
                {
                  "match": "type"
                }
              ]
            },
            "$.checksumSha256": {
              "combine": "AND",
              "matchers": [
                {
                  "match": "regex",
                  "regex": "^[a-f0-9]{64}$"
                }
              ]
            },
            "$.partNumber": {
              "combine": "AND",
              "matchers": [
                {
                  "match": "type"
                }
              ]
            },
            "$.uploadId": {
              "combine": "AND",
              "matchers": [
                {
                  "match": "regex",
                  "regex": "^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$"
                }
              ]
            }
          }
        },
        "status": 200
      }
    },
    {
      "description": "a request to retrieve the current status of the upload",
      "providerStates": [
        {
          "name": "an upload '44444444-4444-4444-8444-444444444444' is currently in the 'uploading' state"
        }
      ],
      "request": {
        "headers": {
          "Authorization": "Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ0eXBlIjoiYWNjZXNzIiwiZW1haWwiOiJuZXctdXNlckBleGFtcGxlLmNvbSIsImV4cCI6NDEwMjQ0NDgwMCwic3ViIjoiMTExMTExMTEtMTExMS00MTExLTgxMTEtMTExMTExMTExMTExIn0.JhjfkCBLBPGeCG7E6KkBWmPSY8bO2st5TX-VrTHSumM"
        },
        "method": "GET",
        "path": "/api/v1/uploads/44444444-4444-4444-8444-444444444444"
      },
      "response": {
        "body": {
          "expiresAt": "2026-02-18T12:00:00.000Z",
          "fileSize": 3811212,
          "partSize": 5242880,
          "status": "uploading",
          "uploadId": "44444444-4444-4444-8444-444444444444",
          "uploadedBytes": 10,
          "uploadedParts": [
            1
          ]
        },
        "headers": {
          "Content-Type": "application/json; charset=utf-8"
        },
        "matchingRules": {
          "body": {
            "$.expiresAt": {
              "combine": "AND",
              "matchers": [
                {
                  "match": "regex",
                  "regex": "^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(?:\\.\\d{3})?Z$"
                }
              ]
            },
            "$.fileSize": {
              "combine": "AND",
              "matchers": [
                {
                  "match": "type"
                }
              ]
            },
            "$.partSize": {
              "combine": "AND",
              "matchers": [
                {
                  "match": "type"
                }
              ]
            },
            "$.status": {
              "combine": "AND",
              "matchers": [
                {
                  "match": "type"
                }
              ]
            },
            "$.uploadId": {
              "combine": "AND",
              "matchers": [
                {
                  "match": "regex",
                  "regex": "^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$"
                }
              ]
            },
            "$.uploadedBytes": {
              "combine": "AND",
              "matchers": [
                {
                  "match": "type"
                }
              ]
            },
            "$.uploadedParts": {
              "combine": "AND",
              "matchers": [
                {
                  "match": "type",
                  "min": 1
                }
              ]
            }
          }
        },
        "status": 200
      }
    },
    {
      "description": "a request to complete and finalize the upload",
      "providerStates": [
        {
          "name": "all parts of the upload '44444444-4444-4444-8444-444444444444' have been successfully stored"
        }
      ],
      "request": {
        "body": {
          "checksumSha256": "de4ecf4e0d0f157c8142fdb7f0e6f9f607c37d9b233830f70f7f83b4f04f9b69"
        },
        "headers": {
          "Authorization": "Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ0eXBlIjoiYWNjZXNzIiwiZW1haWwiOiJuZXctdXNlckBleGFtcGxlLmNvbSIsImV4cCI6NDEwMjQ0NDgwMCwic3ViIjoiMTExMTExMTEtMTExMS00MTExLTgxMTEtMTExMTExMTExMTExIn0.JhjfkCBLBPGeCG7E6KkBWmPSY8bO2st5TX-VrTHSumM",
          "Content-Type": "application/json",
          "Idempotency-Key": "complete-abc123"
        },
        "method": "POST",
        "path": "/api/v1/uploads/44444444-4444-4444-8444-444444444444/complete"
      },
      "response": {
        "body": {
          "deduplicated": false,
          "mediaId": "55555555-5555-4555-8555-555555555555",
          "status": "processing"
        },
        "headers": {
          "Content-Type": "application/json; charset=utf-8"
        },
        "matchingRules": {
          "body": {
            "$.deduplicated": {
              "combine": "AND",
              "matchers": [
                {
                  "match": "type"
                }
              ]
            },
            "$.mediaId": {
              "combine": "AND",
              "matchers": [
                {
                  "match": "regex",
                  "regex": "^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$"
                }
              ]
            },
            "$.status": {
              "combine": "AND",
              "matchers": [
                {
                  "match": "type"
                }
              ]
            }
          }
        },
        "status": 200
      }
    },
    {
      "description": "a request to abort the upload session",
      "providerStates": [
        {
          "name": "an upload '44444444-4444-4444-8444-444444444444' exists and can be cancelled"
        }
      ],
      "request": {
        "headers": {
          "Authorization": "Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ0eXBlIjoiYWNjZXNzIiwiZW1haWwiOiJuZXctdXNlckBleGFtcGxlLmNvbSIsImV4cCI6NDEwMjQ0NDgwMCwic3ViIjoiMTExMTExMTEtMTExMS00MTExLTgxMTEtMTExMTExMTExMTExIn0.JhjfkCBLBPGeCG7E6KkBWmPSY8bO2st5TX-VrTHSumM"
        },
        "method": "POST",
        "path": "/api/v1/uploads/44444444-4444-4444-8444-444444444444/abort"
      },
      "response": {
        "body": {
          "status": "aborted",
          "uploadId": "44444444-4444-4444-8444-444444444444"
        },
        "headers": {
          "Content-Type": "application/json; charset=utf-8"
        },
        "matchingRules": {
          "body": {
            "$.status": {
              "combine": "AND",
              "matchers": [
                {
                  "match": "type"
                }
              ]
            },
            "$.uploadId": {
              "combine": "AND",
              "matchers": [
                {
                  "match": "regex",
                  "regex": "^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$"
                }
              ]
            }
          }
        },
        "status": 200
      }
    }
  ],
  "metadata": {
    "pact-js": {
      "version": "14.0.0"
    },
    "pactRust": {
      "ffi": "0.4.28",
      "models": "1.3.5"
    },
    "pactSpecification": {
      "version": "3.0.0"
    }
  },
  "provider": {
    "name": "ingest-service"
  }
}
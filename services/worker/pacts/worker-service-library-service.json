{
  "consumer": {
    "name": "worker-service"
  },
  "messages": [
    {
      "contents": {
        "mediaId": "55555555-5555-4555-8555-555555555555",
        "ownerId": "11111111-1111-4111-8111-111111111111",
        "relativePath": "11111111-1111-4111-8111-111111111111/2026/02/55555555-5555-4555-8555-555555555555.jpg",
        "requestedAt": "2026-02-18T12:00:10.000Z",
        "videoEncodingProfileOverride": {
          "audioBitrateKbps": 96,
          "audioCodec": "libopus",
          "bitrateKbps": 1800,
          "codec": "libvpx-vp9",
          "frameRate": 24,
          "outputFormat": "webm",
          "preset": "fast",
          "resolution": "1280x720"
        }
      },
      "description": "a command to generate thumbnails and variants for a media item",
      "matchingRules": {
        "body": {
          "$.mediaId": {
            "combine": "AND",
            "matchers": [
              {
                "match": "regex",
                "regex": "^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$"
              }
            ]
          },
          "$.ownerId": {
            "combine": "AND",
            "matchers": [
              {
                "match": "type"
              }
            ]
          },
          "$.relativePath": {
            "combine": "AND",
            "matchers": [
              {
                "match": "type"
              }
            ]
          },
          "$.requestedAt": {
            "combine": "AND",
            "matchers": [
              {
                "match": "regex",
                "regex": "^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(?:\\.\\d{3})?Z$"
              }
            ]
          },
          "$.videoEncodingProfileOverride": {
            "combine": "AND",
            "matchers": [
              {
                "match": "type"
              }
            ]
          }
        }
      },
      "metadata": {
        "contentType": "application/json"
      }
    },
    {
      "contents": {
        "hardDeleteAt": "2026-03-20T12:00:00.000Z",
        "mediaId": "55555555-5555-4555-8555-555555555555",
        "ownerId": "11111111-1111-4111-8111-111111111111"
      },
      "description": "a command to permanently delete a soft-deleted media item",
      "matchingRules": {
        "body": {
          "$.hardDeleteAt": {
            "combine": "AND",
            "matchers": [
              {
                "match": "regex",
                "regex": "^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(?:\\.\\d{3})?Z$"
              }
            ]
          },
          "$.mediaId": {
            "combine": "AND",
            "matchers": [
              {
                "match": "regex",
                "regex": "^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$"
              }
            ]
          },
          "$.ownerId": {
            "combine": "AND",
            "matchers": [
              {
                "match": "regex",
                "regex": "^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$"
              }
            ]
          }
        }
      },
      "metadata": {
        "contentType": "application/json"
      }
    }
  ],
  "metadata": {
    "pact-js": {
      "version": "14.0.0"
    },
    "pactRust": {
      "ffi": "0.4.28",
      "models": "1.3.5"
    },
    "pactSpecification": {
      "version": "3.0.0"
    }
  },
  "provider": {
    "name": "library-service"
  }
}